XCHG instruction comprehensive test
==================================

Testing 8-bit operations:
  Registers: A=0x12, B=0x34 -> Result: A=0x34, B=0x12
  Memory: (align offset 0), Value=0x56, Register=0x78 -> Result: Memory=0x78, Register=0x56
  Memory: (align offset 1), Value=0x9a, Register=0xbc -> Result: Memory=0xbc, Register=0x9a
  Special AX form: AX=0xde, REG=0xf0 -> Result: AX=0xf0, REG=0xde
  Extended regs: R8=0x1122334455667788, R9=0x99aabbccddeeff00 -> Result: R8=0x1122334455667788, R9=0x99aabbccddeeff00
  NOP case: Value=0x1234567890abcdef -> Result: 0x1234567890abcdef

Testing 16-bit operations:
  Registers: A=0x1234, B=0x5678 -> Result: A=0x5678, B=0x1234
  Memory: (align offset 0), Value=0x9abc, Register=0xdef0 -> Result: Memory=0xdef0, Register=0x9abc
  Memory: (align offset 1), Value=0x1122, Register=0x3344 -> Result: Memory=0x3344, Register=0x1122
  Special AX form: AX=0x5566, REG=0x7788 -> Result: AX=0x7788, REG=0x5566
  Extended regs: R8=0x1122334455667788, R9=0x99aabbccddeeff00 -> Result: R8=0x1122334455667788, R9=0x99aabbccddeeff00
  NOP case: Value=0x1234567890abcdef -> Result: 0x1234567890abcdef

Testing 32-bit operations:
  Registers: A=0x12345678, B=0x9abcdef0 -> Result: A=0x9abcdef0, B=0x12345678
  Memory: (align offset 0), Value=0x11223344, Register=0x55667788 -> Result: Memory=0x55667788, Register=0x11223344
  Memory: (align offset 1), Value=0x99aabbcc, Register=0xddeeff00 -> Result: Memory=0xddeeff00, Register=0x99aabbcc
  Special AX form: AX=0x12345678, REG=0x9abcdef0 -> Result: AX=0x9abcdef0, REG=0x12345678
  Extended regs: R8=0x1122334455667788, R9=0x99aabbccddeeff00 -> Result: R8=0x1122334455667788, R9=0x99aabbccddeeff00
  NOP case: Value=0x1234567890abcdef -> Result: 0x1234567890abcdef

Testing 64-bit operations:
  Registers: A=0x1234567890abcdef, B=0xfedcba0987654321 -> Result: A=0xfedcba0987654321, B=0x1234567890abcdef
  Memory: (align offset 0), Value=0x1122334455667788, Register=0x99aabbccddeeff00 -> Result: Memory=0x99aabbccddeeff00, Register=0x1122334455667788
  Memory: (align offset 1), Value=0x123456789abcdef, Register=0xfedcba9876543210 -> Result: Memory=0xfedcba9876543210, Register=0x123456789abcdef
  Special AX form: AX=0x1234567890abcdef, REG=0xfedcba0987654321 -> Result: AX=0xfedcba0987654321, REG=0x1234567890abcdef
  Extended regs: R8=0x1122334455667788, R9=0x99aabbccddeeff00 -> Result: R8=0x1122334455667788, R9=0x99aabbccddeeff00
  NOP case: Value=0x1234567890abcdef -> Result: 0x1234567890abcdef

Testing boundary values:
  Registers: A=0x0, B=0xffffffffffffffff -> Result: A=0xffffffffffffffff, B=0x0
  Registers: A=0x8000000000000000, B=0x7fffffffffffffff -> Result: A=0x7fffffffffffffff, B=0x8000000000000000

Testing multithreaded locking behavior:
Starting multithreaded test with 4 threads...
Multithreaded result: shared_value=40000 (expected 40000)
  SUCCESS: No race condition detected

XCHG test completed
===================
